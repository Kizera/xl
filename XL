--[[
    ‚ò†Ô∏è JEM DUNGEON CLEARER V2 [Hover Edition]
    - ‡∏•‡∏≠‡∏¢‡∏Ñ‡πâ‡∏≤‡∏á‡∏ü‡πâ‡∏≤ ‡πÑ‡∏°‡πà‡∏ï‡∏Å‡∏•‡∏á‡∏û‡∏∑‡πâ‡∏ô (Anti-Gravity)
    - ‡πÑ‡∏•‡πà‡∏Ü‡πà‡∏≤‡∏°‡∏≠‡∏ô + ‡∏´‡∏≤‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡∏ó‡∏≤‡∏á‡∏≠‡∏≠‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
]]

-- CONFIGURATION
local CONFIG = {
    HeightOffset = 10,  -- ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏´‡∏±‡∏ß‡∏°‡∏≠‡∏ô (‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡πâ‡∏™‡∏π‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏ô‡∏¥‡∏î‡∏ô‡∏∂‡∏á‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢)
    SkillArgs = {"MadaraThird"}, 
    AutoSkillDelay = 0.25, 
}

-- SERVICES
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local VirtualInputManager = game:GetService("VirtualInputManager")
local CoreGui = game:GetService("CoreGui")
local LocalPlayer = Players.LocalPlayer

-- STATE
local Toggles = {
    AutoFarm = false,
}

------------------------------------------------------
-- üñ•Ô∏è GUI SYSTEM
------------------------------------------------------
if CoreGui:FindFirstChild("JemDungeonUI") then CoreGui.JemDungeonUI:Destroy() end
local ScreenGui = Instance.new("ScreenGui"); ScreenGui.Name = "JemDungeonUI"; ScreenGui.Parent = CoreGui
local MainFrame = Instance.new("Frame"); MainFrame.Name = "MainFrame"; MainFrame.Size = UDim2.new(0, 250, 0, 150); MainFrame.Position = UDim2.new(0.5, -125, 0.2, 0); MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20); MainFrame.Active = true; MainFrame.Draggable = true; MainFrame.Parent = ScreenGui

local Title = Instance.new("TextLabel"); Title.Text = "‚ò†Ô∏è JEM HOVER FARM V2"; Title.Size = UDim2.new(1, 0, 0, 40); Title.BackgroundColor3 = Color3.fromRGB(142, 68, 173); Title.TextColor3 = Color3.new(1, 1, 1); Title.Font = Enum.Font.GothamBold; Title.TextSize = 14; Title.Parent = MainFrame

local StatusLbl = Instance.new("TextLabel"); StatusLbl.Text = "Status: Idle"; StatusLbl.Size = UDim2.new(1, 0, 0, 30); StatusLbl.Position = UDim2.new(0, 0, 0, 40); StatusLbl.BackgroundTransparency = 1; StatusLbl.TextColor3 = Color3.fromRGB(255, 200, 0); StatusLbl.Font = Enum.Font.Gotham; StatusLbl.Parent = MainFrame

local ToggleBtn = Instance.new("TextButton"); ToggleBtn.Text = "START HOVER FARM [OFF]"; ToggleBtn.Size = UDim2.new(0.9, 0, 0, 50); ToggleBtn.Position = UDim2.new(0.05, 0, 0, 80); ToggleBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60); ToggleBtn.TextColor3 = Color3.new(1, 1, 1); ToggleBtn.Font = Enum.Font.GothamBold; ToggleBtn.Parent = MainFrame

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ BodyVelocity (‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡∏ö‡∏¥‡∏ô)
local function ToggleHover(state)
    local char = LocalPlayer.Character
    local root = char and char:FindFirstChild("HumanoidRootPart")
    if root then
        if state then
            -- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏£‡∏á‡∏¢‡∏Å
            local bv = root:FindFirstChild("JemHover") or Instance.new("BodyVelocity")
            bv.Name = "JemHover"
            bv.Parent = root
            bv.MaxForce = Vector3.new(100000, 100000, 100000) -- ‡πÅ‡∏£‡∏á‡πÄ‡∏¢‡∏≠‡∏∞‡πÜ ‡πÉ‡∏´‡πâ‡∏™‡∏π‡πâ‡πÅ‡∏£‡∏á‡πÇ‡∏ô‡πâ‡∏°‡∏ñ‡πà‡∏ß‡∏á‡πÑ‡∏î‡πâ
            bv.Velocity = Vector3.zero -- ‡πÉ‡∏´‡πâ‡∏´‡∏¢‡∏∏‡∏î‡∏ô‡∏¥‡πà‡∏á‡πÜ
        else
            -- ‡∏•‡∏ö‡πÅ‡∏£‡∏á‡∏¢‡∏Å (‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏õ‡∏Å‡∏ï‡∏¥)
            local bv = root:FindFirstChild("JemHover")
            if bv then bv:Destroy() end
        end
    end
end

ToggleBtn.MouseButton1Click:Connect(function()
    Toggles.AutoFarm = not Toggles.AutoFarm
    if Toggles.AutoFarm then
        ToggleBtn.Text = "STOP HOVER FARM [ON]"; ToggleBtn.BackgroundColor3 = Color3.fromRGB(46, 204, 113)
    else
        ToggleBtn.Text = "START HOVER FARM [OFF]"; ToggleBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
        StatusLbl.Text = "Status: Stopped"
        ToggleHover(false) -- ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡∏ö‡∏¥‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏´‡∏¢‡∏∏‡∏î
    end
end)

local CloseBtn = Instance.new("TextButton"); CloseBtn.Text = "X"; CloseBtn.Size = UDim2.new(0, 30, 0, 30); CloseBtn.Position = UDim2.new(1, -30, 0, 0); CloseBtn.BackgroundTransparency = 1; CloseBtn.TextColor3 = Color3.new(1,1,1); CloseBtn.Parent = MainFrame; CloseBtn.MouseButton1Click:Connect(function() ScreenGui:Destroy(); ToggleHover(false) end)

------------------------------------------------------
-- ‚öôÔ∏è LOGIC SYSTEM
------------------------------------------------------
local function FindExitPrompt()
    for _, desc in ipairs(workspace:GetDescendants()) do
        if desc:IsA("ProximityPrompt") then return desc end
    end
    return nil
end

task.spawn(function()
    while true do
        task.wait() -- ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡πÄ‡∏ü‡∏£‡∏° (‡πÄ‡∏£‡πá‡∏ß‡∏™‡∏∏‡∏î)
        if Toggles.AutoFarm then
            local char = LocalPlayer.Character
            local root = char and char:FindFirstChild("HumanoidRootPart")
            local mobFolder = workspace:FindFirstChild("Live")

            if root and mobFolder then
                local mobs = mobFolder:GetChildren()
                
                -- [[ ‚öîÔ∏è MODE: ‡∏Ü‡πà‡∏≤‡∏°‡∏≠‡∏ô ]]
                if #mobs > 0 then
                    StatusLbl.Text = "‚öîÔ∏è Hovering & Killing..."
                    ToggleHover(true) -- ‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡∏ö‡∏¥‡∏ô
                    
                    local target = mobs[1]
                    local tRoot = target:FindFirstChild("HumanoidRootPart") or target:FindFirstChild("Torso")
                    
                    if tRoot then
                        -- ‡∏•‡πá‡∏≠‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏´‡∏±‡∏ß‡∏°‡∏≠‡∏ô‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤ (‡∏Å‡∏±‡∏ô‡∏°‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏´‡∏ô‡∏µ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏≤‡∏£‡πà‡∏ß‡∏á)
                        root.CFrame = CFrame.new(tRoot.Position + Vector3.new(0, CONFIG.HeightOffset, 0), tRoot.Position)
                        
                        -- ‡∏¢‡∏¥‡∏á‡∏™‡∏Å‡∏¥‡∏• (‡πÉ‡∏™‡πà pcall ‡∏Å‡∏±‡∏ô error)
                        pcall(function()
                            game:GetService("ReplicatedStorage").Remotes.AbilityHandler:FireServer(unpack(CONFIG.SkillArgs))
                        end)
                    else
                        target:Destroy()
                    end
                    
                -- [[ üö™ MODE: ‡∏´‡∏≤‡∏ó‡∏≤‡∏á‡∏≠‡∏≠‡∏Å ]]
                else
                    ToggleHover(false) -- ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡∏ö‡∏¥‡∏ô (‡∏à‡∏∞‡πÑ‡∏î‡πâ‡πÄ‡∏î‡∏¥‡∏ô‡πÑ‡∏õ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏î‡πâ‡∏™‡∏∞‡∏î‡∏ß‡∏Å) ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏∞‡∏ö‡∏¥‡∏ô‡πÑ‡∏õ‡∏Å‡πá‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡πÄ‡∏î‡∏¥‡∏ô‡∏ä‡∏±‡∏ß‡∏£‡πå‡∏Å‡∏ß‡πà‡∏≤
                    StatusLbl.Text = "üö™ Finding Exit..."
                    local exitPrompt = FindExitPrompt()
                    
                    if exitPrompt and exitPrompt.Parent then
                        local exitPart = exitPrompt.Parent
                        local exitPos = exitPart:IsA("Model") and exitPart:GetPivot().Position or exitPart.Position
                        
                        if (root.Position - exitPos).Magnitude > 5 then
                            root.CFrame = CFrame.new(exitPos + Vector3.new(0, 2, 0))
                            StatusLbl.Text = "üöÄ Warping to Exit..."
                            task.wait(0.5)
                        else
                            StatusLbl.Text = "üîò Pressing E..."
                            VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.E, false, game)
                            task.wait(0.1)
                            VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.E, false, game)
                            fireproximityprompt(exitPrompt)
                            task.wait(0.3)
                        end
                    else
                        StatusLbl.Text = "‚ö†Ô∏è Waiting for Exit/Mobs..."
                        task.wait(1)
                    end
                end
            end
        else
            ToggleHover(false) -- ‡∏ñ‡πâ‡∏≤‡∏õ‡∏¥‡∏î‡∏≠‡∏≠‡πÇ‡∏ï‡πâ ‡∏Å‡πá‡∏õ‡∏¥‡∏î‡∏ö‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢
        end
    end
end)
